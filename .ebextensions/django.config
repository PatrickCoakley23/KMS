option_settings: 
  "aws:elasticbeanstalk:application:environment": 
    DJANGO_SETTINGS_MODULE: "KMS.settings" 
    "PYTHONPATH": "/var/app/current:$PYTHONPATH"
  "aws:elasticbeanstalk:container:python": 
    WSGIPath: KMS.wsgi:application 

container_commands:
  01_makemigrations:
    command: |      
      source $PYTHONPATH/activate
      pipenv run python ./manage.py makemigrations
      leader_only: true
  02_migrate:
    command: |      
      source $PYTHONPATH/activate
      pipenv run python ./manage.py migrate
    leader_only: true
  03_createsu:
    command: |      
      source $PYTHONPATH/activate
      pipenv run python ./manage.py createsuperuser
  04_collectstatic:
    command: |      
      source $PYTHONPATH/activate
      pipenv run python ./manage.py collectstatic --noinput 
      leader_only: true